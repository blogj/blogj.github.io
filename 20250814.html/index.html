<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Openwrt下ocserv证书登录配置letsencrypt | 孤岛</title><meta name=keywords content><meta name=description content='序言
Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书
环境
openwrt 版本

Lucky版本

ocserv版本

win客户端版本

配置
安装通过ssh上openwrt命令行安装ocserv


1
2


opkg update
opkg install ocserv luci-app-ocserv


通过申请的ssl证书去掉下面危险提醒

1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射

2、然后在Openwrt 上OpenConnect VPN里有一个编辑模版修改里面下列配置并保存为Lucky申请的域名映射里的证书路径


1
2


server-cert = /etc/ocserv/ssl/gao4范域名.pem
server-key = /etc/ocserv/ssl/gao4范域名.key



这样就去掉了连接时候证书无效提醒
3、进行测试，开启客户端下面图片选项进行链接

4、连接成功，并没有提示证书无效

证书认证登录
用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。
1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）


1
2
3


mkdir /etc/ocserv/certs/
cd /etc/ocserv/certs/
vi ocm


2、粘贴复制下面脚本


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86


#!/bin/bash

init() {
    WORK="./work"
    CA_TMPL="${WORK}/ca.tmpl"
    CA_KEY="${WORK}/ca-key.pem"
    CA_CERT="./ca.pem"
    USER="$1"
    USER_TMPL="${WORK}/${USER}.tmpl"
    USER_KEY="${WORK}/${USER}-key.pem"
    USER_CERT="${WORK}/${USER}.pem"
    USER_P12="./${USER}.p12"
    REVOKED_CERT="${WORK}/revoked.pem"
    CRL_TMPL="${WORK}/crl.tmpl"
    CRL_CERT="./crl.pem"

    # Ensure working directory
    [[ -d $WORK ]] || mkdir -p $WORK

    # CA Template
    [[ -f $CA_TMPL ]] || cat << _EOF_ > $CA_TMPL
cn = "VPN CA"
serial = 1
expiration_days = 3650
ca
signing_key
cert_signing_key
crl_signing_key
_EOF_

    # CA Private Key
    [[ -f $CA_KEY ]] || certtool --generate-privkey --outfile $CA_KEY

    # CA Certificate
    [[ -f $CA_CERT ]] || certtool --generate-self-signed --load-privkey $CA_KEY --template $CA_TMPL --outfile $CA_CERT
}

generate() {
    # User Template
    cat << _EOF_ > $USER_TMPL
cn = "$USER"
expiration_days = 3650
signing_key
tls_www_client
_EOF_

    # User Private Key
    certtool --generate-privkey --outfile $USER_KEY

    # User Certificate
    certtool --generate-certificate --load-privkey $USER_KEY --load-ca-certificate $CA_CERT --load-ca-privkey $CA_KEY --template $USER_TMPL --outfile $USER_CERT

    # Export User Certificate
    certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey $USER_KEY --load-certificate $USER_CERT --outfile $USER_P12 --outder
}

revoke() {
    # Copy User Certificate to Revoked Certificate
    cat $USER_CERT >> $REVOKED_CERT

    # CRL Template
    [[ -f $CRL_TMPL ]] || cat << _EOF_ > $CRL_TMPL
crl_next_update = 3650
crl_number = 1
_EOF_

    # CRL Certificate
    certtool --generate-crl --load-certificate $REVOKED_CERT --load-ca-privkey $CA_KEY --load-ca-certificate $CA_CERT --template $CRL_TMPL --outfile $CRL_CERT
}

case $1 in
    generate)
        init $2
        generate
        ;;
    revoke)
        init $2
        revoke
        ;;
    *)
        echo "\
Usage:
    $0 generate USER
    $0 revoke USER
"
esac


3、给于脚本权限'><meta name=author content="白墨"><link rel=canonical href=https://gao4.top/20250814.html/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://gao4.top/icons/16x16><link rel=icon type=image/png sizes=16x16 href=https://gao4.top/icons/16x16><link rel=icon type=image/png sizes=32x32 href=https://gao4.top/icons/32x32.png><link rel=apple-touch-icon href=https://gao4.top/icons/32x32.png><link rel=mask-icon href=https://gao4.top/icons/32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://gao4.top/20250814.html/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://gao4.top/20250814.html/"><meta property="og:site_name" content="孤岛"><meta property="og:title" content="Openwrt下ocserv证书登录配置letsencrypt"><meta property="og:description" content='序言 Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书
环境 openwrt 版本
Lucky版本
ocserv版本
win客户端版本
配置 安装通过ssh上openwrt命令行安装ocserv 1 2 opkg update opkg install ocserv luci-app-ocserv 通过申请的ssl证书去掉下面危险提醒 1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射
2、然后在Openwrt 上OpenConnect VPN里有一个编辑模版修改里面下列配置并保存为Lucky申请的域名映射里的证书路径
1 2 server-cert = /etc/ocserv/ssl/gao4范域名.pem server-key = /etc/ocserv/ssl/gao4范域名.key 这样就去掉了连接时候证书无效提醒
3、进行测试，开启客户端下面图片选项进行链接
4、连接成功，并没有提示证书无效
证书认证登录 用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。
1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）
1 2 3 mkdir /etc/ocserv/certs/ cd /etc/ocserv/certs/ vi ocm 2、粘贴复制下面脚本
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 #!/bin/bash init() { WORK="./work" CA_TMPL="${WORK}/ca.tmpl" CA_KEY="${WORK}/ca-key.pem" CA_CERT="./ca.pem" USER="$1" USER_TMPL="${WORK}/${USER}.tmpl" USER_KEY="${WORK}/${USER}-key.pem" USER_CERT="${WORK}/${USER}.pem" USER_P12="./${USER}.p12" REVOKED_CERT="${WORK}/revoked.pem" CRL_TMPL="${WORK}/crl.tmpl" CRL_CERT="./crl.pem" # Ensure working directory [[ -d $WORK ]] || mkdir -p $WORK # CA Template [[ -f $CA_TMPL ]] || cat << _EOF_ > $CA_TMPL cn = "VPN CA" serial = 1 expiration_days = 3650 ca signing_key cert_signing_key crl_signing_key _EOF_ # CA Private Key [[ -f $CA_KEY ]] || certtool --generate-privkey --outfile $CA_KEY # CA Certificate [[ -f $CA_CERT ]] || certtool --generate-self-signed --load-privkey $CA_KEY --template $CA_TMPL --outfile $CA_CERT } generate() { # User Template cat << _EOF_ > $USER_TMPL cn = "$USER" expiration_days = 3650 signing_key tls_www_client _EOF_ # User Private Key certtool --generate-privkey --outfile $USER_KEY # User Certificate certtool --generate-certificate --load-privkey $USER_KEY --load-ca-certificate $CA_CERT --load-ca-privkey $CA_KEY --template $USER_TMPL --outfile $USER_CERT # Export User Certificate certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey $USER_KEY --load-certificate $USER_CERT --outfile $USER_P12 --outder } revoke() { # Copy User Certificate to Revoked Certificate cat $USER_CERT >> $REVOKED_CERT # CRL Template [[ -f $CRL_TMPL ]] || cat << _EOF_ > $CRL_TMPL crl_next_update = 3650 crl_number = 1 _EOF_ # CRL Certificate certtool --generate-crl --load-certificate $REVOKED_CERT --load-ca-privkey $CA_KEY --load-ca-certificate $CA_CERT --template $CRL_TMPL --outfile $CRL_CERT } case $1 in generate) init $2 generate ;; revoke) init $2 revoke ;; *) echo "\ Usage: $0 generate USER $0 revoke USER " esac 3、给于脚本权限'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-08-14T12:48:39+08:00"><meta property="article:modified_time" content="2025-08-14T12:48:39+08:00"><meta property="og:image" content="https://gao4.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://gao4.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Openwrt下ocserv证书登录配置letsencrypt"><meta name=twitter:description content='序言
Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书
环境
openwrt 版本

Lucky版本

ocserv版本

win客户端版本

配置
安装通过ssh上openwrt命令行安装ocserv


1
2


opkg update
opkg install ocserv luci-app-ocserv


通过申请的ssl证书去掉下面危险提醒

1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射

2、然后在Openwrt 上OpenConnect VPN里有一个编辑模版修改里面下列配置并保存为Lucky申请的域名映射里的证书路径


1
2


server-cert = /etc/ocserv/ssl/gao4范域名.pem
server-key = /etc/ocserv/ssl/gao4范域名.key



这样就去掉了连接时候证书无效提醒
3、进行测试，开启客户端下面图片选项进行链接

4、连接成功，并没有提示证书无效

证书认证登录
用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。
1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）


1
2
3


mkdir /etc/ocserv/certs/
cd /etc/ocserv/certs/
vi ocm


2、粘贴复制下面脚本


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86


#!/bin/bash

init() {
    WORK="./work"
    CA_TMPL="${WORK}/ca.tmpl"
    CA_KEY="${WORK}/ca-key.pem"
    CA_CERT="./ca.pem"
    USER="$1"
    USER_TMPL="${WORK}/${USER}.tmpl"
    USER_KEY="${WORK}/${USER}-key.pem"
    USER_CERT="${WORK}/${USER}.pem"
    USER_P12="./${USER}.p12"
    REVOKED_CERT="${WORK}/revoked.pem"
    CRL_TMPL="${WORK}/crl.tmpl"
    CRL_CERT="./crl.pem"

    # Ensure working directory
    [[ -d $WORK ]] || mkdir -p $WORK

    # CA Template
    [[ -f $CA_TMPL ]] || cat << _EOF_ > $CA_TMPL
cn = "VPN CA"
serial = 1
expiration_days = 3650
ca
signing_key
cert_signing_key
crl_signing_key
_EOF_

    # CA Private Key
    [[ -f $CA_KEY ]] || certtool --generate-privkey --outfile $CA_KEY

    # CA Certificate
    [[ -f $CA_CERT ]] || certtool --generate-self-signed --load-privkey $CA_KEY --template $CA_TMPL --outfile $CA_CERT
}

generate() {
    # User Template
    cat << _EOF_ > $USER_TMPL
cn = "$USER"
expiration_days = 3650
signing_key
tls_www_client
_EOF_

    # User Private Key
    certtool --generate-privkey --outfile $USER_KEY

    # User Certificate
    certtool --generate-certificate --load-privkey $USER_KEY --load-ca-certificate $CA_CERT --load-ca-privkey $CA_KEY --template $USER_TMPL --outfile $USER_CERT

    # Export User Certificate
    certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey $USER_KEY --load-certificate $USER_CERT --outfile $USER_P12 --outder
}

revoke() {
    # Copy User Certificate to Revoked Certificate
    cat $USER_CERT >> $REVOKED_CERT

    # CRL Template
    [[ -f $CRL_TMPL ]] || cat << _EOF_ > $CRL_TMPL
crl_next_update = 3650
crl_number = 1
_EOF_

    # CRL Certificate
    certtool --generate-crl --load-certificate $REVOKED_CERT --load-ca-privkey $CA_KEY --load-ca-certificate $CA_CERT --template $CRL_TMPL --outfile $CRL_CERT
}

case $1 in
    generate)
        init $2
        generate
        ;;
    revoke)
        init $2
        revoke
        ;;
    *)
        echo "\
Usage:
    $0 generate USER
    $0 revoke USER
"
esac


3、给于脚本权限'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://gao4.top/post/"},{"@type":"ListItem","position":2,"name":"Openwrt下ocserv证书登录配置letsencrypt","item":"https://gao4.top/20250814.html/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Openwrt下ocserv证书登录配置letsencrypt","name":"Openwrt下ocserv证书登录配置letsencrypt","description":"序言 Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书\n环境 openwrt 版本\nLucky版本\nocserv版本\nwin客户端版本\n配置 安装通过ssh上openwrt命令行安装ocserv 1 2 opkg update opkg install ocserv luci-app-ocserv 通过申请的ssl证书去掉下面危险提醒 1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射\n2、然后在Openwrt 上OpenConnect VPN里有一个编辑模版修改里面下列配置并保存为Lucky申请的域名映射里的证书路径\n1 2 server-cert = /etc/ocserv/ssl/gao4范域名.pem server-key = /etc/ocserv/ssl/gao4范域名.key 这样就去掉了连接时候证书无效提醒\n3、进行测试，开启客户端下面图片选项进行链接\n4、连接成功，并没有提示证书无效\n证书认证登录 用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。\n1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）\n1 2 3 mkdir /etc/ocserv/certs/ cd /etc/ocserv/certs/ vi ocm 2、粘贴复制下面脚本\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 #!/bin/bash init() { WORK=\u0026#34;./work\u0026#34; CA_TMPL=\u0026#34;${WORK}/ca.tmpl\u0026#34; CA_KEY=\u0026#34;${WORK}/ca-key.pem\u0026#34; CA_CERT=\u0026#34;./ca.pem\u0026#34; USER=\u0026#34;$1\u0026#34; USER_TMPL=\u0026#34;${WORK}/${USER}.tmpl\u0026#34; USER_KEY=\u0026#34;${WORK}/${USER}-key.pem\u0026#34; USER_CERT=\u0026#34;${WORK}/${USER}.pem\u0026#34; USER_P12=\u0026#34;./${USER}.p12\u0026#34; REVOKED_CERT=\u0026#34;${WORK}/revoked.pem\u0026#34; CRL_TMPL=\u0026#34;${WORK}/crl.tmpl\u0026#34; CRL_CERT=\u0026#34;./crl.pem\u0026#34; # Ensure working directory [[ -d $WORK ]] || mkdir -p $WORK # CA Template [[ -f $CA_TMPL ]] || cat \u0026lt;\u0026lt; _EOF_ \u0026gt; $CA_TMPL cn = \u0026#34;VPN CA\u0026#34; serial = 1 expiration_days = 3650 ca signing_key cert_signing_key crl_signing_key _EOF_ # CA Private Key [[ -f $CA_KEY ]] || certtool --generate-privkey --outfile $CA_KEY # CA Certificate [[ -f $CA_CERT ]] || certtool --generate-self-signed --load-privkey $CA_KEY --template $CA_TMPL --outfile $CA_CERT } generate() { # User Template cat \u0026lt;\u0026lt; _EOF_ \u0026gt; $USER_TMPL cn = \u0026#34;$USER\u0026#34; expiration_days = 3650 signing_key tls_www_client _EOF_ # User Private Key certtool --generate-privkey --outfile $USER_KEY # User Certificate certtool --generate-certificate --load-privkey $USER_KEY --load-ca-certificate $CA_CERT --load-ca-privkey $CA_KEY --template $USER_TMPL --outfile $USER_CERT # Export User Certificate certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey $USER_KEY --load-certificate $USER_CERT --outfile $USER_P12 --outder } revoke() { # Copy User Certificate to Revoked Certificate cat $USER_CERT \u0026gt;\u0026gt; $REVOKED_CERT # CRL Template [[ -f $CRL_TMPL ]] || cat \u0026lt;\u0026lt; _EOF_ \u0026gt; $CRL_TMPL crl_next_update = 3650 crl_number = 1 _EOF_ # CRL Certificate certtool --generate-crl --load-certificate $REVOKED_CERT --load-ca-privkey $CA_KEY --load-ca-certificate $CA_CERT --template $CRL_TMPL --outfile $CRL_CERT } case $1 in generate) init $2 generate ;; revoke) init $2 revoke ;; *) echo \u0026#34;\\ Usage: $0 generate USER $0 revoke USER \u0026#34; esac 3、给于脚本权限\n","keywords":[],"articleBody":"序言 Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书\n环境 openwrt 版本\nLucky版本\nocserv版本\nwin客户端版本\n配置 安装通过ssh上openwrt命令行安装ocserv 1 2 opkg update opkg install ocserv luci-app-ocserv 通过申请的ssl证书去掉下面危险提醒 1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射\n2、然后在Openwrt 上OpenConnect VPN里有一个编辑模版修改里面下列配置并保存为Lucky申请的域名映射里的证书路径\n1 2 server-cert = /etc/ocserv/ssl/gao4范域名.pem server-key = /etc/ocserv/ssl/gao4范域名.key 这样就去掉了连接时候证书无效提醒\n3、进行测试，开启客户端下面图片选项进行链接\n4、连接成功，并没有提示证书无效\n证书认证登录 用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。\n1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）\n1 2 3 mkdir /etc/ocserv/certs/ cd /etc/ocserv/certs/ vi ocm 2、粘贴复制下面脚本\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 #!/bin/bash init() { WORK=\"./work\" CA_TMPL=\"${WORK}/ca.tmpl\" CA_KEY=\"${WORK}/ca-key.pem\" CA_CERT=\"./ca.pem\" USER=\"$1\" USER_TMPL=\"${WORK}/${USER}.tmpl\" USER_KEY=\"${WORK}/${USER}-key.pem\" USER_CERT=\"${WORK}/${USER}.pem\" USER_P12=\"./${USER}.p12\" REVOKED_CERT=\"${WORK}/revoked.pem\" CRL_TMPL=\"${WORK}/crl.tmpl\" CRL_CERT=\"./crl.pem\" # Ensure working directory [[ -d $WORK ]] || mkdir -p $WORK # CA Template [[ -f $CA_TMPL ]] || cat \u003c\u003c _EOF_ \u003e $CA_TMPL cn = \"VPN CA\" serial = 1 expiration_days = 3650 ca signing_key cert_signing_key crl_signing_key _EOF_ # CA Private Key [[ -f $CA_KEY ]] || certtool --generate-privkey --outfile $CA_KEY # CA Certificate [[ -f $CA_CERT ]] || certtool --generate-self-signed --load-privkey $CA_KEY --template $CA_TMPL --outfile $CA_CERT } generate() { # User Template cat \u003c\u003c _EOF_ \u003e $USER_TMPL cn = \"$USER\" expiration_days = 3650 signing_key tls_www_client _EOF_ # User Private Key certtool --generate-privkey --outfile $USER_KEY # User Certificate certtool --generate-certificate --load-privkey $USER_KEY --load-ca-certificate $CA_CERT --load-ca-privkey $CA_KEY --template $USER_TMPL --outfile $USER_CERT # Export User Certificate certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey $USER_KEY --load-certificate $USER_CERT --outfile $USER_P12 --outder } revoke() { # Copy User Certificate to Revoked Certificate cat $USER_CERT \u003e\u003e $REVOKED_CERT # CRL Template [[ -f $CRL_TMPL ]] || cat \u003c\u003c _EOF_ \u003e $CRL_TMPL crl_next_update = 3650 crl_number = 1 _EOF_ # CRL Certificate certtool --generate-crl --load-certificate $REVOKED_CERT --load-ca-privkey $CA_KEY --load-ca-certificate $CA_CERT --template $CRL_TMPL --outfile $CRL_CERT } case $1 in generate) init $2 generate ;; revoke) init $2 revoke ;; *) echo \"\\ Usage: $0 generate USER $0 revoke USER \" esac 3、给于脚本权限\n1 chmod 775 ocm 4、创建用户命令\n1 ./ocm generate USERNAME 即可直接生成用户 5、最重要的OpenConnect VPN配置\n在参考模版下进行下面配置\n1 2 3 4 auth = \"certificate\" #auth = \"|AUTH|\" ca-cert = ca-cert = /etc/ocserv/certs/ca.pem cert-user-oid = 2.5.4.3 点击保存并运用\n6、重新启动一下OpenConnect VPN\n去掉勾保存运行，再勾选启动，来对配置文件进行生效，如果没有做这一步，可能你点击保存并运用后会出现网络连接不成功提示\n客户端下载第三方 https://ocserv.yydy.link:2023/#/\n参考 https://www.ioiox.com/archives/90.html\nhttps://blog.0u0.moe/ocserv-letsencrypt-certificate/\nhttps://www.ioiox.com/archives/89.html\n","wordCount":"399","inLanguage":"zh","image":"https://gao4.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2025-08-14T12:48:39+08:00","dateModified":"2025-08-14T12:48:39+08:00","author":{"@type":"Person","name":"白墨"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gao4.top/20250814.html/"},"publisher":{"@type":"Organization","name":"孤岛","logo":{"@type":"ImageObject","url":"https://gao4.top/icons/16x16"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gao4.top/ accesskey=h title="孤岛 (Alt + H)">孤岛</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://gao4.top/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://gao4.top/>主页</a>&nbsp;»&nbsp;<a href=https://gao4.top/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Openwrt下ocserv证书登录配置letsencrypt</h1><div class=post-meta><span title='2025-08-14 12:48:39 +0800 CST'>八月 14, 2025</span>&nbsp;·&nbsp;2 分钟&nbsp;·&nbsp;399 字&nbsp;·&nbsp;白墨&nbsp;|&nbsp;<a href=https://github.com/blogj/blog/tree/main/content/post/openwrt%e4%b8%8bocserv%e8%af%81%e4%b9%a6%e7%99%bb%e5%bd%95%e9%85%8d%e7%bd%ae.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=post-content><h2 id=序言>序言<a hidden class=anchor aria-hidden=true href=#序言>#</a></h2><p>Openwrt安装OpenConnect VPN配置证书登录与通过Lucky申请ssl证书</p><h2 id=环境>环境<a hidden class=anchor aria-hidden=true href=#环境>#</a></h2><p>openwrt 版本</p><p><img alt=openwrt loading=lazy src=/wp-content/uploads/2025/image-20250814125242089.png></p><p>Lucky版本</p><p><img alt=lu环境 loading=lazy src=/wp-content/uploads/2025/image-20250814125350152.png></p><p>ocserv版本</p><p><img alt=image-20250814125516626 loading=lazy src=/wp-content/uploads/2025/image-20250814125516626.png></p><p>win客户端版本</p><p><img alt=image-20250814125544582 loading=lazy src=/wp-content/uploads/2025/image-20250814125544582.png></p><h2 id=配置>配置<a hidden class=anchor aria-hidden=true href=#配置>#</a></h2><h3 id=安装通过ssh上openwrt命令行安装ocserv>安装通过ssh上openwrt命令行安装ocserv<a hidden class=anchor aria-hidden=true href=#安装通过ssh上openwrt命令行安装ocserv>#</a></h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>opkg update
</span></span><span class=line><span class=cl>opkg install ocserv luci-app-ocserv
</span></span></code></pre></td></tr></table></div></div><h3 id=通过申请的ssl证书去掉下面危险提醒>通过申请的ssl证书去掉下面危险提醒<a hidden class=anchor aria-hidden=true href=#通过申请的ssl证书去掉下面危险提醒>#</a></h3><p><img alt=危险提醒 loading=lazy src=/wp-content/uploads/2025/image-20250814130016011.png></p><p>1、去Lucky申请ssl证书后在证书配置最下面有一个证书映射</p><p><img alt=证书映射 loading=lazy src=/wp-content/uploads/2025/image-20250814130108781.png></p><p>2、然后在Openwrt 上OpenConnect VPN里有一个<strong>编辑模版</strong>修改里面下列<strong>配置并保存</strong>为Lucky申请的域名映射里的证书路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>server-cert = /etc/ocserv/ssl/gao4范域名.pem
</span></span><span class=line><span class=cl>server-key = /etc/ocserv/ssl/gao4范域名.key
</span></span></code></pre></td></tr></table></div></div><p><img alt=image-20250814130459122 loading=lazy src=/wp-content/uploads/2025/image-20250814130459122.png></p><p>这样就去掉了连接时候证书无效提醒</p><p>3、进行测试，开启客户端下面图片选项进行链接</p><p><img alt=image-20250814130754110 loading=lazy src=/wp-content/uploads/2025/image-20250814130754110.png></p><p>4、连接成功，并没有提示证书无效</p><p><img alt=连接成功 loading=lazy src=/wp-content/uploads/2025/image-20250814130914244.png></p><h3 id=证书认证登录>证书认证登录<a hidden class=anchor aria-hidden=true href=#证书认证登录>#</a></h3><p>用户证书只需 ocserv 信任 CA 即可，因此使用自建 CA 签发证书。</p><p>1、创建证书目录并移动到该目录然后通过vi编辑（不会vi编辑建议通过搜索引擎学习一下）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mkdir /etc/ocserv/certs/
</span></span><span class=line><span class=cl>cd /etc/ocserv/certs/
</span></span><span class=line><span class=cl>vi ocm
</span></span></code></pre></td></tr></table></div></div><p>2、粘贴复制下面脚本</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl>init<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>WORK</span><span class=o>=</span><span class=s2>&#34;./work&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>CA_TMPL</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/ca.tmpl&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>CA_KEY</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/ca-key.pem&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>CA_CERT</span><span class=o>=</span><span class=s2>&#34;./ca.pem&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>USER</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>USER_TMPL</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/</span><span class=si>${</span><span class=nv>USER</span><span class=si>}</span><span class=s2>.tmpl&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>USER_KEY</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/</span><span class=si>${</span><span class=nv>USER</span><span class=si>}</span><span class=s2>-key.pem&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>USER_CERT</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/</span><span class=si>${</span><span class=nv>USER</span><span class=si>}</span><span class=s2>.pem&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>USER_P12</span><span class=o>=</span><span class=s2>&#34;./</span><span class=si>${</span><span class=nv>USER</span><span class=si>}</span><span class=s2>.p12&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>REVOKED_CERT</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/revoked.pem&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>CRL_TMPL</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>WORK</span><span class=si>}</span><span class=s2>/crl.tmpl&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nv>CRL_CERT</span><span class=o>=</span><span class=s2>&#34;./crl.pem&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Ensure working directory</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -d <span class=nv>$WORK</span> <span class=o>]]</span> <span class=o>||</span> mkdir -p <span class=nv>$WORK</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># CA Template</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -f <span class=nv>$CA_TMPL</span> <span class=o>]]</span> <span class=o>||</span> cat <span class=s>&lt;&lt; _EOF_ &gt; $CA_TMPL
</span></span></span><span class=line><span class=cl><span class=s>cn = &#34;VPN CA&#34;
</span></span></span><span class=line><span class=cl><span class=s>serial = 1
</span></span></span><span class=line><span class=cl><span class=s>expiration_days = 3650
</span></span></span><span class=line><span class=cl><span class=s>ca
</span></span></span><span class=line><span class=cl><span class=s>signing_key
</span></span></span><span class=line><span class=cl><span class=s>cert_signing_key
</span></span></span><span class=line><span class=cl><span class=s>crl_signing_key
</span></span></span><span class=line><span class=cl><span class=s>_EOF_</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># CA Private Key</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -f <span class=nv>$CA_KEY</span> <span class=o>]]</span> <span class=o>||</span> certtool --generate-privkey --outfile <span class=nv>$CA_KEY</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># CA Certificate</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -f <span class=nv>$CA_CERT</span> <span class=o>]]</span> <span class=o>||</span> certtool --generate-self-signed --load-privkey <span class=nv>$CA_KEY</span> --template <span class=nv>$CA_TMPL</span> --outfile <span class=nv>$CA_CERT</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>generate<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># User Template</span>
</span></span><span class=line><span class=cl>    cat <span class=s>&lt;&lt; _EOF_ &gt; $USER_TMPL
</span></span></span><span class=line><span class=cl><span class=s>cn = &#34;$USER&#34;
</span></span></span><span class=line><span class=cl><span class=s>expiration_days = 3650
</span></span></span><span class=line><span class=cl><span class=s>signing_key
</span></span></span><span class=line><span class=cl><span class=s>tls_www_client
</span></span></span><span class=line><span class=cl><span class=s>_EOF_</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># User Private Key</span>
</span></span><span class=line><span class=cl>    certtool --generate-privkey --outfile <span class=nv>$USER_KEY</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># User Certificate</span>
</span></span><span class=line><span class=cl>    certtool --generate-certificate --load-privkey <span class=nv>$USER_KEY</span> --load-ca-certificate <span class=nv>$CA_CERT</span> --load-ca-privkey <span class=nv>$CA_KEY</span> --template <span class=nv>$USER_TMPL</span> --outfile <span class=nv>$USER_CERT</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># Export User Certificate</span>
</span></span><span class=line><span class=cl>    certtool --to-p12 --pkcs-cipher 3des-pkcs12 --load-privkey <span class=nv>$USER_KEY</span> --load-certificate <span class=nv>$USER_CERT</span> --outfile <span class=nv>$USER_P12</span> --outder
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>revoke<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1># Copy User Certificate to Revoked Certificate</span>
</span></span><span class=line><span class=cl>    cat <span class=nv>$USER_CERT</span> &gt;&gt; <span class=nv>$REVOKED_CERT</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># CRL Template</span>
</span></span><span class=line><span class=cl>    <span class=o>[[</span> -f <span class=nv>$CRL_TMPL</span> <span class=o>]]</span> <span class=o>||</span> cat <span class=s>&lt;&lt; _EOF_ &gt; $CRL_TMPL
</span></span></span><span class=line><span class=cl><span class=s>crl_next_update = 3650
</span></span></span><span class=line><span class=cl><span class=s>crl_number = 1
</span></span></span><span class=line><span class=cl><span class=s>_EOF_</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># CRL Certificate</span>
</span></span><span class=line><span class=cl>    certtool --generate-crl --load-certificate <span class=nv>$REVOKED_CERT</span> --load-ca-privkey <span class=nv>$CA_KEY</span> --load-ca-certificate <span class=nv>$CA_CERT</span> --template <span class=nv>$CRL_TMPL</span> --outfile <span class=nv>$CRL_CERT</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>case</span> <span class=nv>$1</span> in
</span></span><span class=line><span class=cl>    generate<span class=o>)</span>
</span></span><span class=line><span class=cl>        init <span class=nv>$2</span>
</span></span><span class=line><span class=cl>        generate
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>    revoke<span class=o>)</span>
</span></span><span class=line><span class=cl>        init <span class=nv>$2</span>
</span></span><span class=line><span class=cl>        revoke
</span></span><span class=line><span class=cl>        <span class=p>;;</span>
</span></span><span class=line><span class=cl>    *<span class=o>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;\
</span></span></span><span class=line><span class=cl><span class=s2>Usage:
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=nv>$0</span><span class=s2> generate USER
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=nv>$0</span><span class=s2> revoke USER
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=k>esac</span>
</span></span></code></pre></td></tr></table></div></div><p>3、给于脚本权限</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>chmod 775 ocm 
</span></span></code></pre></td></tr></table></div></div><p>4、创建用户命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>./ocm generate USERNAME 即可直接生成用户
</span></span></code></pre></td></tr></table></div></div><p><img alt=image-20250814132832956 loading=lazy src=/wp-content/uploads/2025/image-20250814132832956.png></p><p>5、最重要的OpenConnect VPN配置</p><p>在参考模版下进行下面配置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>auth = &#34;certificate&#34;
</span></span><span class=line><span class=cl>#auth = &#34;|AUTH|&#34;
</span></span><span class=line><span class=cl>ca-cert = ca-cert = /etc/ocserv/certs/ca.pem
</span></span><span class=line><span class=cl>cert-user-oid = 2.5.4.3
</span></span></code></pre></td></tr></table></div></div><p>点击保存并运用</p><p>6、<strong>重新启动一下OpenConnect VPN</strong></p><p>去掉勾保存运行，再勾选启动，来对配置文件进行生效，如果没有做这一步，可能你点击保存并运用后会出现网络连接不成功提示</p><p><img alt=image-20250814133525409 loading=lazy src=/wp-content/uploads/2025/image-20250814133525409.png></p><h3 id=客户端下载第三方>客户端下载第三方<a hidden class=anchor aria-hidden=true href=#客户端下载第三方>#</a></h3><p><a href=https://ocserv.yydy.link:2023/#/>https://ocserv.yydy.link:2023/#/</a></p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><p><a href=https://www.ioiox.com/archives/90.html>https://www.ioiox.com/archives/90.html</a></p><p><a href=https://blog.0u0.moe/ocserv-letsencrypt-certificate/>https://blog.0u0.moe/ocserv-letsencrypt-certificate/</a></p><p><a href=https://www.ioiox.com/archives/89.html>https://www.ioiox.com/archives/89.html</a></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://gao4.top/%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84nas%E6%96%B9%E6%A1%88%E5%B0%8F%E8%AE%B0%E5%BD%95.html/><span class=title>下一页 »</span><br><span>当前使用的nas方案小记录</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://gao4.top/>孤岛</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" rel=noopener target=_blank>又拍云</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>